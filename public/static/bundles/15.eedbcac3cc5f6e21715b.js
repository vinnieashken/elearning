(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{298:function(e,t,n){"use strict";n.r(t),function(e){var a=n(1),o=n.n(a),r=n(24),i=n(8),s=n(16),c=n.n(s),l=n(299),u=n.n(l),m=n(300),d=n.n(m),p=n(198);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function v(t){var n=f(Object(a.useState)(""),2);n[0],n[1];Object(a.useEffect)((function(e){}),[]);return o.a.createElement("div",{id:"option-".concat(t.rowKey)},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"form-group col-md-10"},o.a.createElement("label",null,"Option"),o.a.createElement("textarea",{name:"option",id:"ta-".concat(t.rowKey),className:"form-control",defaultValue:t.option.hasOwnProperty("option")?t.option.option:"",onChange:function(n){var a=t.option;a.option=e("#ta-".concat(t.rowKey))[0].value,t.updateOptions({key:t.rowKey,data:a})}})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement("button",{type:"button",className:"mt-5 float-right btn btn-sm btn-rounded btn-success",onClick:function(e){c.a.unmountComponentAtNode(document.getElementById("option-".concat(t.rowKey)).parentNode)}.bind(this)},"Delete Option"))))}t.default=function(t){var n=this,s=t.location.state,l=f(Object(a.useState)(s.hasOwnProperty("question")?s.question:{}),1)[0],m=f(Object(a.useState)(s.hasOwnProperty("module")?s.module:{}),1)[0],b=f(Object(a.useState)(!1),2),h=b[0],y=(b[1],f(Object(a.useState)(l.hasOwnProperty("options")&&l.options.length>0),2)),E=y[0],w=y[1],O=f(Object(a.useState)(!1),2),g=O[0],N=O[1],S=f(Object(a.useState)(!1),2),j=S[0],P=S[1],x=f(Object(a.useState)(""),2),q=x[0],k=x[1],A=f(Object(a.useState)(""),2),C=A[0],K=A[1],I=f(Object(a.useState)(1),2),T=I[0],D=I[1],J=f(Object(a.useState)({}),2),V=J[0],_=J[1],F=f(Object(a.useState)(l.hasOwnProperty("question")?l.question:""),2),Q=F[0],B=F[1],M=f(Object(a.useState)({}),2),U=M[0],W=M[1],$=f(Object(a.useState)([]),2),z=$[0],G=$[1];Object(a.useEffect)((function(t){if(e("[id^='option-']").remove(),l.hasOwnProperty("options")&&l.options.length>0){if(l.hasOwnProperty("answer")){var n=l.options.filter((function(e){return e.id===l.answer}));n.length>0&&_({label:n[0].option,value:l.answer})}var a=U;if(a["id-".concat(l.options[0].id)]=l.options[0],W(a),l.options.length>0)for(var o=1;o<l.options.length;o++)H(l.options[o]);w(!1)}}),[t.question]);var H=function(t){var n=document.createElement("div"),a=T+1,r="".concat(t.hasOwnProperty("id")?"id-".concat(t.id):a),i=U;i[r]=t,c.a.render(o.a.createElement(v,{key:r,rowKey:r,option:t,updateOptions:L}),n),e("#options").append(n),D(a);var s=[];for(var l in U)s.push(U[l]);W(i),G(s)},L=function(e){var t=U;t[e.key]=e.data;var n=[];for(var a in U)n.push(U[a]);W(t),G(n)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"about",className:"section-padding mt-md-5 exam"},o.a.createElement("div",{className:"container mt-md-5"},o.a.createElement("form",{onSubmit:function(a){a.preventDefault(),P(!1),N(!0);var o={moduleid:m.id};o.questions=[l.hasOwnProperty("id")?{id:l.id,module_id:m.id,question:Q,answer:V.value,options:z.map((function(e){var t={question_id:l.id,option:e.option};return e.hasOwnProperty("id")&&(t.id=e.id),t}))}:{question:Q,options:z.map((function(e){return e.option})),answer:V.value}],e.ajax({url:"".concat(i.a,"/institution/modules/questions/").concat(l.hasOwnProperty("id")?"edit":"add"),method:"post",data:o,error:function(t,n,a){var o="Sorry an error has occurred. We are working on it. (".concat(t.status,")");try{o=JSON.parse(t.responseText).message}catch(e){}N(!1),P(!0),k("alert alert-danger"),K(o),e("html, body").animate({scrollTop:0},200)}.bind(n),success:function(e){t.history.push({pathname:"/exams/exam/edit/".concat(m.id),state:{message:!0,message_type:"alert alert-success",response:"Question updated successfully."}})}.bind(n)})}},j?o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("div",{className:"text-center mt-2"},o.a.createElement("div",{className:q,role:"alert"},o.a.createElement("div",{className:"alert-message"},C))))):"",h?"":o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-header"},o.a.createElement("h5",null,m.name)),o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"form-group col-md-12"},o.a.createElement("label",null,"Question"),o.a.createElement(u.a,{editor:d.a,data:Q,onInit:function(e){},onChange:function(e,t){var n=t.getData();B(n)}}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"form-group col-md-10"},o.a.createElement("label",null,"Option "),o.a.createElement("textarea",{name:"option",id:l.hasOwnProperty("options")&&l.options.length>0?"id-".concat(l.options[0].id):"id-0",className:"form-control",defaultValue:l.hasOwnProperty("options")&&l.options.length>0?l.options[0].option:"",onChange:function(t){var n=l.hasOwnProperty("options")&&l.options.length>0?"id-".concat(l.options[0].id):"id-0",a=l.hasOwnProperty("options")&&l.options.length>0?l.options[0]:{};a.option=e("#".concat(n))[0].value,L({key:l.hasOwnProperty("options")&&l.options.length>0?"id-".concat(l.options[0].id):0,data:a})}})),o.a.createElement("div",{className:"col-md-2"},o.a.createElement("button",{type:"button",className:"mt-5 float-right btn btn-sm btn-rounded btn-success",onClick:H.bind(this,{})},"Add Option"))),o.a.createElement("div",{id:"options"}),E?o.a.createElement("div",{className:"text-center",style:{marginTop:"50px"}},o.a.createElement(r.a,{color:"#cf2027"})):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",null,"Correct Answer"),o.a.createElement(p.a,{name:"answerr",defaultValue:V,onChange:_,options:z.map((function(e){return{value:e.hasOwnProperty("id")?e.id:e.option,label:e.option}}))})),o.a.createElement("div",{className:"col-md-6"},g?o.a.createElement(r.a,null):o.a.createElement("button",{type:"submit",className:"btn btn-sm btn-success btn-rounded float-right"},"Save changes"))))))))))}}.call(this,n(60))}}]);